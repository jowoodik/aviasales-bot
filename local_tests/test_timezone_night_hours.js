// ðŸ§ª Ð¢ÐµÑÑ‚ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑƒÑ‡ÐµÑ‚Ð° Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸

/**
 * ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ð±ÑƒÐ´ÐµÑ‚ Ð»Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð·Ð²ÑƒÐº Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹
 */
function testNightHours(timezone, testTimeUTC) {
  console.log(`\n${'='.repeat(60)}`);
  console.log(`Ð¢ÐµÑÑ‚ Ð´Ð»Ñ Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹: ${timezone}`);
  console.log(`Ð¡ÐµÑ€Ð²ÐµÑ€Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ (UTC): ${testTimeUTC.toISOString()}`);

  // Ð¡ÐµÑ€Ð²ÐµÑ€Ð½Ñ‹Ð¹ Ñ‡Ð°Ñ (ÑÑ‚Ð°Ñ€Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° - ÐÐ•ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐÐ¯)
  const serverHour = testTimeUTC.getHours();
  const serverShouldDisable = serverHour >= 23 || serverHour < 8;

  // Ð§Ð°Ñ Ð² Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° (Ð½Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° - ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐÐ¯)
  const clientHour = parseInt(testTimeUTC.toLocaleString('en-US', {
    timeZone: timezone,
    hour: 'numeric',
    hour12: false
  }));
  const clientShouldDisable = clientHour >= 23 || clientHour < 8;

  // Ð’Ñ‹Ð²Ð¾Ð´ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
  console.log(`\nÐ¡ÐµÑ€Ð²ÐµÑ€Ð½Ñ‹Ð¹ Ñ‡Ð°Ñ: ${serverHour}:00`);
  console.log(`Ð§Ð°Ñ Ð² Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ðµ ${timezone}: ${clientHour}:00`);

  console.log(`\nÐ¡Ñ‚Ð°Ñ€Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° (ÑÐµÑ€Ð²ÐµÑ€Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ):`);
  console.log(`  ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð·Ð²ÑƒÐº? ${serverShouldDisable ? 'âœ… Ð”Ð (23:00-8:00)' : 'âŒ ÐÐ•Ð¢'}`);

  console.log(`\nÐÐ¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° (ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¾Ðµ Ð²Ñ€ÐµÐ¼Ñ):`);
  console.log(`  ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð·Ð²ÑƒÐº? ${clientShouldDisable ? 'âœ… Ð”Ð (23:00-8:00)' : 'âŒ ÐÐ•Ð¢'}`);

  if (serverShouldDisable !== clientShouldDisable) {
    console.log(`\nâš ï¸  Ð ÐÐ—ÐÐ˜Ð¦Ð! Ð¡Ñ‚Ð°Ñ€Ð°Ñ Ð¸ Ð½Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð´Ð°ÑŽÑ‚ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹!`);
    console.log(`   Ð­Ñ‚Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑƒÑ‡ÐµÑ‚Ð° Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°.`);
  } else {
    console.log(`\nâœ… Ð’ Ð´Ð°Ð½Ð½Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾Ð±Ðµ Ð»Ð¾Ð³Ð¸ÐºÐ¸ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÑŽÑ‚`);
  }

  console.log(`${'='.repeat(60)}`);
}

// Ð¢ÐµÑÑ‚Ñ‹
console.log('\nðŸ§ª Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• Ð£Ð§Ð•Ð¢Ð Ð¢ÐÐ™ÐœÐ—ÐžÐÐ« ÐŸÐ Ð˜ ÐžÐŸÐ Ð•Ð”Ð•Ð›Ð•ÐÐ˜Ð˜ ÐÐžÐ§ÐÐžÐ“Ðž Ð’Ð Ð•ÐœÐ•ÐÐ˜\n');

// Ð¢ÐµÑÑ‚ 1: 22:00 UTC (01:00 MSK) - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ð·Ð²ÑƒÐº Ð´Ð»Ñ MSK, Ð½Ð¾ Ð½Ðµ Ð´Ð»Ñ UTC
testNightHours('Europe/Moscow', new Date('2024-01-15T22:00:00Z'));

// Ð¢ÐµÑÑ‚ 2: 05:00 UTC (08:00 MSK) - Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ð·Ð²ÑƒÐº Ð´Ð»Ñ MSK, Ð½Ð¾ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð´Ð»Ñ UTC
testNightHours('Europe/Moscow', new Date('2024-01-15T05:00:00Z'));

// Ð¢ÐµÑÑ‚ 3: 19:00 UTC (00:00 MSK) - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ð·Ð²ÑƒÐº Ð´Ð»Ñ MSK
testNightHours('Europe/Moscow', new Date('2024-01-15T19:00:00Z'));

// Ð¢ÐµÑÑ‚ 4: Ð’Ð»Ð°Ð´Ð¸Ð²Ð¾ÑÑ‚Ð¾Ðº (UTC+10) Ð² 14:00 UTC = 00:00 VLAT
testNightHours('Asia/Vladivostok', new Date('2024-01-15T14:00:00Z'));

// Ð¢ÐµÑÑ‚ 5: Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³ (UTC+5) Ð² 20:00 UTC = 01:00 YEKT
testNightHours('Asia/Yekaterinburg', new Date('2024-01-15T20:00:00Z'));

console.log('\nâœ… Ð¢ÐµÑÑ‚Ñ‹ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ñ‹!\n');
console.log('ðŸ“ Ð’Ñ‹Ð²Ð¾Ð´:');
console.log('   Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð´Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹');
console.log('   Ð½Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð·Ð²ÑƒÐºÐ° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹.');
console.log('   Ð‘ÐµÐ· ÑƒÑ‡ÐµÑ‚Ð° Ñ‚Ð°Ð¹Ð¼Ð·Ð¾Ð½Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð² Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ñ€ÐµÐ³Ð¸Ð¾Ð½Ð°Ñ… Ð±ÑƒÐ´ÑƒÑ‚');
console.log('   Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ Ð·Ð²ÑƒÐºÐ¾Ð²Ñ‹Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð½Ðµ Ð² Ñ‚Ð¾ Ð²Ñ€ÐµÐ¼Ñ.\n');
