–ú–µ—Ö–∞–Ω–∏–∑–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω—ã –≤ PuppeteerPricer
üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤ (—Ç–∏–ø–∞ Aviasales, Skyscanner) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞: —Ü–µ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –ï—Å–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ, –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω–æ–π –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥, –∫–æ–≥–¥–∞ –ø–æ–¥–≥—Ä—É–∑—è—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤.

–°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–ø–∏–Ω–Ω–µ—Ä—ã, —Ç–µ–∫—Å—Ç "–ò—â–µ–º –±–∏–ª–µ—Ç—ã") —Ä–∞–±–æ—Ç–∞–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫:

–ù–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∏ –º–æ–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

–¢—Ä–µ–±–æ–≤–∞–ª–∏ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–æ–≤–µ—Ä–æ–∫

–ó–∞–Ω–∏–º–∞–ª–∏ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç

üî• –†–µ—à–µ–Ω–∏–µ: Price Stability Algorithm
–ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π –∏–¥–µ–µ: –µ—Å–ª–∏ —Ü–µ–Ω–∞ –ø–µ—Ä–≤–æ–≥–æ –±–∏–ª–µ—Ç–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 3 —Å–µ–∫—É–Ω–¥—ã, –∑–Ω–∞—á–∏—Ç –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å.

–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π ‚Üí —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π –±–∏–ª–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–≤–µ—Ä—Ö—É

–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ø-1 ‚Üí –µ—Å–ª–∏ —Ü–µ–Ω–∞ –º–µ–Ω—è–µ—Ç—Å—è, —Å—á–µ—Ç—á–∏–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å = –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ ‚Üí –∫–æ–≥–¥–∞ –Ω–∏–∫–∞–∫–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–µ—à–µ–≤–ª–µ

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 3 (checksRequired)

–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 3000–º—Å (checkInterval)

–û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~9 —Å–µ–∫—É–Ω–¥ (3 –ø—Ä–æ–≤–µ—Ä–∫–∏ √ó 3 —Å–µ–∫)

üìã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É getPriceFromUrl()
text
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   ‚Üì
2. –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ([data-test-id="search-results-items-list"])
   ‚Üì
3. –®–ê–ì 1: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —Ü–µ–Ω–µ (applyPriceSortAscending)
   ‚Üì 1 —Å–µ–∫ –ø–∞—É–∑–∞
4. –®–ê–ì 2: –°–±—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (resetSavedFilters)
   ‚Üì 1 —Å–µ–∫ –ø–∞—É–∑–∞
5. –®–ê–ì 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ë–ï–ó –æ–∂–∏–¥–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
   ‚îú‚îÄ‚îÄ –ë–∞–≥–∞–∂ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω) ‚Üí 1 —Å–µ–∫ –ø–∞—É–∑–∞
   ‚îú‚îÄ‚îÄ –í—Ä–µ–º—è –ø–µ—Ä–µ—Å–∞–¥–∫–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ) ‚Üí 1 —Å–µ–∫ –ø–∞—É–∑–∞
   ‚îî‚îÄ‚îÄ –ê–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏—è (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞) ‚Üí 1 —Å–µ–∫ –ø–∞—É–∑–∞
   ‚Üì
6. –®–ê–ì 4: –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–Ø (waitForPriceStability)
   ‚Üì ~9 —Å–µ–∫—É–Ω–¥
7. –®–ê–ì 5: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã
   –ü–æ—á–µ–º—É —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ?
   –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (200-500–º—Å)

–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç ~9 —Å–µ–∫—É–Ω–¥

–ï—Å–ª–∏ –¥–µ–ª–∞—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞: 3 —Ñ–∏–ª—å—Ç—Ä–∞ √ó 9 —Å–µ–∫ = 27 —Å–µ–∫—É–Ω–¥ –ª–∏—à–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

–° –æ–¥–Ω–æ–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–µ–π –≤ –∫–æ–Ω—Ü–µ: –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∑–∞ 3-4 —Å–µ–∫—É–Ω–¥—ã + 1 —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è 9 —Å–µ–∫ = —ç–∫–æ–Ω–æ–º–∏—è ~20 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç

–ü—Ä–∏ —Å–æ—Ç–Ω—è—Ö —Ç–µ—Å—Ç–æ–≤ —Ä–∞–∑–Ω–∏—Ü–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞!

üîß –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
getFirstPrice(page)
–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ü–µ–Ω—É –ø–µ—Ä–≤–æ–≥–æ –±–∏–ª–µ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

number - —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 25490)

null - –µ—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

–õ–æ–≥–∏–∫–∞:

javascript
1. –ù–∞–π—Ç–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã [data-test-id="price"]
2. –í–∑—è—Ç—å –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç (—Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ)
3. –ò–∑–≤–ª–µ—á—å —á–∏—Å–ª–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (—É–±—Ä–∞—Ç—å –≤—Å–µ –Ω–µ—á–∏—Å–ª–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã)
4. –í–µ—Ä–Ω—É—Ç—å —á–∏—Å–ª–æ –∏–ª–∏ null
   waitForPriceStability(page, index, total, checksRequired = 3, checkInterval = 3000)
   –û–∂–∏–¥–∞–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω—ã –ø–µ—Ä–≤–æ–≥–æ –±–∏–ª–µ—Ç–∞.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

page - —ç–∫–∑–µ–º–ø–ª—è—Ä Puppeteer Page

index - –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞ (–¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

total - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ (–¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

checksRequired - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3)

checkInterval - –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3000)

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

number - —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö

–ê–ª–≥–æ—Ä–∏—Ç–º:

text
previousPrice = getFirstPrice()
stableChecks = 0

LOOP:
WAIT(checkInterval)
currentPrice = getFirstPrice()

IF currentPrice == null:
stableChecks = 0  // –°–±—Ä–æ—Å, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
CONTINUE

IF currentPrice == previousPrice:
stableChecks++
LOG: "–¶–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ (stableChecks/checksRequired)"
ELSE:
stableChecks = 0  // –°–±—Ä–æ—Å! –¶–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
previousPrice = currentPrice
LOG: "–¶–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞"

IF stableChecks >= checksRequired:
BREAK  // –£—Å–ø–µ—Ö!

RETURN previousPrice
–ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:

text
[1/100] üí∞ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω—ã –ø–µ—Ä–≤–æ–≥–æ –±–∏–ª–µ—Ç–∞...
[1/100] üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: 3 –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ 3000–º—Å
[1/100] üí∞ –ù–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 25,490 ‚ÇΩ
[1/100] üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å 25,490 ‚Üí 23,150 ‚ÇΩ, —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞
[1/100] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: —Ü–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ 23,150 ‚ÇΩ (1/3)
[1/100] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: —Ü–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ 23,150 ‚ÇΩ (2/3)
[1/100] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: —Ü–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ 23,150 ‚ÇΩ (3/3)
[1/100] üéâ –¶–µ–Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ 23,150 ‚ÇΩ –ø–æ—Å–ª–µ 4 –ø—Ä–æ–≤–µ—Ä–æ–∫
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–¥–ª—è –¥–µ–±–∞–≥–∞)
javascript
await this.waitForPriceStability(page, index, total, 2, 2000);
// 2 –ø—Ä–æ–≤–µ—Ä–∫–∏ √ó 2 —Å–µ–∫ = ~4 —Å–µ–∫—É–Ω–¥—ã
–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)
javascript
await this.waitForPriceStability(page, index, total, 5, 4000);
// 5 –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 4 —Å–µ–∫ = ~20 —Å–µ–∫—É–Ω–¥
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ (—Ç–µ–∫—É—â–∏–µ) –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
javascript
await this.waitForPriceStability(page, index, total, 3, 3000);
// 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ √ó 3 —Å–µ–∫ = ~9 —Å–µ–∫—É–Ω–¥
// –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
text
–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ~8 —Å–µ–∫
–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞: ~5-120 —Å–µ–∫ (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ)
–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: 1 —Å–µ–∫
–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (—Å—Ç–∞—Ä–∞—è): ~3 —Å–µ–∫
–ë–∞–≥–∞–∂: 2 —Å–µ–∫ + —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è 9 —Å–µ–∫ = 11 —Å–µ–∫
–í—Ä–µ–º—è –ø–µ—Ä–µ—Å–∞–¥–∫–∏: 2 —Å–µ–∫ + —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è 9 —Å–µ–∫ = 11 —Å–µ–∫
–ê–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏—è: 2 —Å–µ–∫ + —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è 9 —Å–µ–∫ = 11 —Å–µ–∫
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û: ~42-157 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ç–µ—Å—Ç (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ)
–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
text
–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ~8 —Å–µ–∫
–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: 1 —Å–µ–∫
–°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤: 1 —Å–µ–∫
–ë–∞–≥–∞–∂: 2 —Å–µ–∫ (–ø–∞—É–∑–∞ 1 —Å–µ–∫)
–í—Ä–µ–º—è –ø–µ—Ä–µ—Å–∞–¥–∫–∏: 2 —Å–µ–∫ (–ø–∞—É–∑–∞ 1 —Å–µ–∫)
–ê–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏—è: 2 —Å–µ–∫ (–ø–∞—É–∑–∞ 1 —Å–µ–∫)
–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (–û–î–ù–ê): 9 —Å–µ–∫
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û: ~17-20 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ç–µ—Å—Ç
–£—Å–∫–æ—Ä–µ–Ω–∏–µ: –≤ 2-8 —Ä–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤!

üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–¶–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
–ï—Å–ª–∏ getFirstPrice() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –≤–æ –≤—Ä–µ–º—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏:

–°—á–µ—Ç—á–∏–∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

–õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–∂–∏–¥–∞–Ω–∏–µ

–ï—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫:

–í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é —Ü–µ–Ω—É –ø–æ—Å–ª–µ –æ–∂–∏–¥–∞–Ω–∏—è"

Timeout
–ù–µ—Ç –∂–µ—Å—Ç–∫–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞ –≤ waitForPriceStability() - —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –¢–∞–π–º–∞—É—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ:

page.goto() - 60 —Å–µ–∫—É–Ω–¥

page.waitForSelector() - 30 —Å–µ–∫—É–Ω–¥

üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
‚úÖ –î–µ–ª–∞–π
–í—Å–µ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ü–ï–†–í–´–ú —à–∞–≥–æ–º

–ò—Å–ø–æ–ª—å–∑—É–π –æ–¥–Ω—É —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é –≤ –∫–æ–Ω—Ü–µ, –∞ –Ω–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

–õ–æ–≥–∏—Ä—É–π –≤—Å–µ —ç—Ç–∞–ø—ã –¥–ª—è –¥–µ–±–∞–≥–∞

–î–µ–ª–∞–π –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–∞—É–∑—ã (1 —Å–µ–∫) –º–µ–∂–¥—É —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚ùå –ù–µ –¥–µ–ª–∞–π
–ù–µ –ø—Ä–∏–º–µ–Ω—è–π —Ñ–∏–ª—å—Ç—Ä—ã –¥–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ - –ø–µ—Ä–≤–∞—è —Ü–µ–Ω–∞ –±—É–¥–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π

–ù–µ —É–±–∏—Ä–∞–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é —Å–æ–≤—Å–µ–º - –ø–æ–ª—É—á–∏—à—å –Ω–µ–ø–æ–ª–Ω—ã–µ/–Ω–µ–≤–µ—Ä–Ω—ã–µ —Ü–µ–Ω—ã

–ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–π –ø–∞—É–∑—ã –º–µ–∂–¥—É —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ - —ç—Ç–æ –∑–∞–º–µ–¥–ª–∏—Ç –±–µ–∑ –ø–æ–ª—å–∑—ã

–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã (waitForSearchComplete) - –æ–Ω–∏ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

üîç –û—Ç–ª–∞–¥–∫–∞
–í–∫–ª—é—á–µ–Ω–∏–µ debug-—Ä–µ–∂–∏–º–∞
javascript
const pricer = new PuppeteerPricer(true);  // debug = true
// Puppeteer –æ—Ç–∫—Ä–æ–µ—Ç –≤–∏–¥–∏–º–æ–µ –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞
–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
–ò—â–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

–ú–Ω–æ–≥–æ —Å–±—Ä–æ—Å–æ–≤ —Å—á–µ—Ç—á–∏–∫–∞ ‚Üí –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ–ª–≥–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω–æ —Å—Ç–æ–∏—Ç —É–≤–µ–ª–∏—á–∏—Ç—å checkInterval

–¶–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è —Å –ø–µ—Ä–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Ä–∞–Ω—å—à–µ, –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å checksRequired

–ß–∞—Å—Ç—ã–µ null —Ü–µ–Ω—ã ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –ø—Ä–æ–≥—Ä—É–∑–∏–ª–∞—Å—å

üìù Changelog
v2.0 (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è getFirstPrice()

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è waitForPriceStability()

‚úÖ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º —à–∞–≥–æ–º

‚ùå –£–¥–∞–ª–µ–Ω–∞ waitForSearchComplete() (–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ)

‚ùå –£–¥–∞–ª–µ–Ω–∞ getPricesSnapshot() (–∏–∑–±—ã—Ç–æ—á–Ω–æ)

‚ùå –£–¥–∞–ª–µ–Ω–∞ waitForResultsChange() (–∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é)

‚ùå –£–¥–∞–ª–µ–Ω–∞ waitForStableResults() (—Å—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

v1.0 (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–æ–≤ —Ü–µ–Ω

–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏–Ω–Ω–µ—Ä–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞ –ø–æ–∏—Å–∫–∞