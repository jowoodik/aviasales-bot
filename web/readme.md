# üõ´ Aviasales Bot Admin Panel

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-–∞–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram-–±–æ—Ç–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ç–∞–π–º–∑–æ–Ω–∞, —Ç–∏—Ö–∏–µ —á–∞—Å—ã)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫

### –ü–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (Free, Plus, Admin)
- ‚úÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –û–±—â–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ü–µ–Ω–∞–º –∏ —Ç–∏–ø–∞–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î (VACUUM)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
- ‚úÖ SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä (—Ç–æ–ª—å–∫–æ SELECT)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
web/
‚îú‚îÄ‚îÄ server.js                 # Express —Å–µ—Ä–≤–µ—Ä —Å API
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ admin.html           # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin-styles.css # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ app.js           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ config.js        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ api.js           # API –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îú‚îÄ‚îÄ router.js        # –†–æ—É—Ç–∏–Ω–≥
‚îÇ       ‚îú‚îÄ‚îÄ components/      # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sidebar.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ header.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ table.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ modal.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ stats.js
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ chart.js
‚îÇ       ‚îú‚îÄ‚îÄ pages/           # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ users.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ routes.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ subscriptions.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ checkStats.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ analytics.js
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ failedChecks.js
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ database.js
‚îÇ       ‚îî‚îÄ‚îÄ utils/
‚îÇ           ‚îî‚îÄ‚îÄ helpers.js
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Backend
- Express.js
- SQLite3
- bcrypt (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- cookie-parser

### Frontend
- Bootstrap 5.3
- Bootstrap Icons
- Chart.js 4.4

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd /path/to/your/bot
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```env
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password_here
SESSION_SECRET=your_random_secret_key_here
PORT=3000
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
node web/server.js
```

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- **Username**: `admin`
- **Password**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `.env` —Ñ–∞–π–ª–µ

–ü–∞—Ä–æ–ª—å —Ö—ç—à–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –≤–∏–¥–µ.

## üåê –î–æ—Å—Ç—É–ø

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞–¥–º–∏–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:3000/admin
```

## üì± API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /admin/login` - –í—Ö–æ–¥
- `POST /admin/logout` - –í—ã—Ö–æ–¥
- `GET /admin/check-auth` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /admin/api/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /admin/api/users/:chatId/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /admin/api/users/:chatId` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /admin/api/users/:chatId` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ú–∞—Ä—à—Ä—É—Ç—ã
- `GET /admin/api/routes` - –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `POST /admin/api/routes` - –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç
- `PUT /admin/api/routes/:id` - –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
- `DELETE /admin/api/routes/:id` - –£–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
- `PUT /admin/api/routes/:id/pause` - –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å
- `GET /admin/api/routes/:id/tickets` - –ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç—ã

### –ü–æ–¥–ø–∏—Å–∫–∏
- `GET /admin/api/subscriptions` - –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
- `POST /admin/api/subscriptions` - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `PUT /admin/api/subscriptions/:id` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `DELETE /admin/api/subscriptions/:id` - –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /admin/api/analytics` - –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /admin/api/check-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫
- `GET /admin/api/failed-checks` - –ù–µ—É–¥–∞—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- `DELETE /admin/api/failed-checks/:id` - –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `POST /admin/api/database/backup` - –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
- `POST /admin/api/database/vacuum` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- `GET /admin/api/database/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î
- `GET /admin/api/database/table/:name` - –î–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `POST /admin/api/database/query` - SQL –∑–∞–ø—Ä–æ—Å
- `GET /admin/api/export/:type` - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏
- ‚úÖ Bcrypt —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ (—á–µ—Ä–µ–∑ SameSite cookies)
- ‚úÖ SQL –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞—â–∏—Ç–∞ (prepared statements)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞ (escapeHtml)
- ‚úÖ –¢–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã –≤ SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

## üé® –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Frontend**: Vanilla JavaScript (ES6 Modules)
- **Backend**: Node.js + Express
- **Database**: SQLite3
- **UI Framework**: Bootstrap 5
- **Charts**: Chart.js
- **Icons**: Bootstrap Icons

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ `web/public/js/pages/yourpage.js`
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `app.js`:
```javascript
import YourPage from './pages/yourpage.js';
// ...
this.pages.yourpage = new YourPage();
router.register('yourpage', (params) => {
    this.pages.yourpage.render(params);
});
```
3. –î–æ–±–∞–≤–∏—Ç—å –≤ sidebar.js

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API endpoint

1. –î–æ–±–∞–≤–∏—Ç—å –≤ `web/server.js`:
```javascript
app.get('/admin/api/your-endpoint', requireAdmin, async (req, res) => {
    // Your code
});
```

2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `api.js`:
```javascript
async yourMethod() {
    return this.get('/your-endpoint');
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
```bash
node web/server.js
```

–õ–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12):
```javascript
console.log(...);
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Aviasales Bot Admin Panel

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –Ø–Ω–≤–∞—Ä—å 2026
